function initFontSize(){var e=$.cookie("fontSize");if($(".mainWrapper").css("font-size",e),null!=e)return!1;$.cookie("fontSize","100%",{expires:1});var e=$.cookie("fontSize");$(".mainWrapper").css("font-size",e)}function setFontSize1(e,t){$(".mainWrapper").css("font-size",fontSize1),$.cookie("fontSize",t,{expires:1})}function setFontSize2(e,t){$(".mainWrapper").css("font-size",fontSize2),$.cookie("fontSize",t,{expires:1})}function setFontSize3(e,t){$(".mainWrapper").css("font-size",fontSize3),$.cookie("fontSize",t,{expires:1})}function WebFeedback(){var e=(window.location.protocol,window.location.hostname,document.referrer);e=e.replace("-","%2D"),e=e.replace(",","%2E"),e=e.replace("/","%2F"),e=e.replace("_","%5F");var t=document.title;t=t.replace("-","%2D"),t=t.replace(",","%2E"),t=t.replace("/","%2F"),t=t.replace("_","%5F");var a=window.location.href;a=a.replace("-","%2D"),a=a.replace(",","%2E"),a=a.replace("/","%2F"),a=a.replace("_","%5F"),""==t&&(t=a,pos3=t.indexOf("?"),pos3>0&&(t=t.substr(0,pos3)));var o="/app/webfeedback/getFeedback.aspx?rateUrl="+a+"&refer="+e+"&theTitle="+t;window.open(o,"WebFeedback","width=480, height=360, scrollbars=no, toolbar=no, location=no, menubar=no, resizable=No, top=200, left=200")}function onBlurGreyAssist(e,t){"trim"in String.prototype||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),""==e.value.trim()&&(e.value=t,$("#"+e.id).addClass("grey"))}function onFocusGreyAssist(e,t){e.value==t&&(e.value="",$("#"+e.id).removeClass("grey"))}function getParameterByName(e,t){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var a="[\\?&]"+e+"=([^&#]*)",o=RegExp(a),i=t?t:window.location.search,n=o.exec(i);return null==n?"":decodeURIComponent(n[1].replace(/\+/g," "))}function setCookie(e,t,a){if(a){var o=new Date;o.setTime(o.getTime()+24*a*60*60*1e3);var i="; expires="+o.toGMTString()}else var i="";document.cookie=e+"="+t+i+"; path=/; "}function getCookie(e){for(var t=e+"=",a=document.cookie.split(";"),o=0;o<a.length;o++){for(var i=a[o];" "==i.charAt(0);)i=i.substring(1,i.length);if(0==i.indexOf(t))return i.substring(t.length,i.length)}return null}function deleteCookie(e){setCookie(e,"",-1)}function isValidLocation(e){return"Carolinas"==e||"Florida"==e}function getImageSource(){var e="Carolinas"==getCookie("Location")?"logo-duke-progress.png":"logo-duke.png";$("#progresslogo").append('<img src="/assets/www/images/header/'+e+'" />')}var _gaq=_gaq||[];_gaq.push(["_setAccount","UA-16529895-2"]),_gaq.push(["_setAllowLinker",!0]),_gaq.push(["_trackPageview"]),_gaq.push(["de._setAccount","UA-11304865-4"]),_gaq.push(["de._setCustomVar",3,"CustType","PE",1]),_gaq.push(["de._setAllowLinker",!0]),_gaq.push(["de._setDomainName",".progress-energy.com"]),_gaq.push(["de._trackPageview"]),$('a[href*="duke-energy.com"]').click(function(){return _gaq.push(["de._link",this.href]),!1});var gaq=_gaq,previousState="",currentState="",fontSize1="100%",fontSize2="120%",fontSize3="150%";$(document).ready(function(){function e(){$(this).find(".subnav").stop().slideDown("fast").show()}function t(){$(this).find(".subnav").stop().slideUp("fast",function(){$(this).hide(),$(".stormModeBanner").hasClass("close")||($(".stormModeBanner").hide(),$(".stormModeBanner").show())})}$("#q").keypress(function(e){var t=$(this).val();13==e.keyCode&&(window.location="/search/default.aspx?q="+t+"&client=newpe&site=default_collection&proxystylesheet=newpe&fromHeader=true")}),$("#searchButton").click(function(){var e=$("#q").val();window.location="/search/default.aspx?q="+e+"&client=newpe&site=default_collection&proxystylesheet=newpe&fromHeader=true"}),$("a.activateTooltip[title]").tooltip();var a=$(".modalTrigger").overlay({mask:{color:"#666",loadSpeed:200,opacity:.9},closeOnClick:!0});$(".modal a.closeIcon").click(function(e){a.overlay().close(),e.preventDefault()});var o=$('<div title="External Page"><a href="#"></a></div>'),i=$('<div><a href="#"></a></div>'),n=$("#ytmodalpopup"),r={autoOpen:!1,height:500,width:694,modal:!0},s={autoOpen:!1,height:190,width:335,dialogClass:"StateSelector",modal:!0},c={autoOpen:!1,height:345,width:510,modal:!0,close:function(){$("#embeddedPlayer").detach()}};o.dialog(r),n.dialog(c),i.dialog(s),$(".showAjaxDialog").click(function(){return o.dialog("open"),o.load($(this).attr("href")),!1}),$(".ytvideoModals").click(function(){var e=$(this).attr("href");return"http://www.youtube.com/watch?v="==e.substr(0,31)&&(e="http://www.youtube.com/v/"+e.substr(31)),$("#ytmodalpopup").html(" "),$("#ytmodalpopup").html('<object id="viewer" width="480" height="295"><param name="wmode" value="transparent" /><param name="movie" value="'+e+'" /><param name="allowFullScreen" value="true" /><embed id="embeddedPlayer" src="'+e+'" type="application/x-shockwave-flash" allowfullscreen="true" width="480" height="295" wmode="transparent"></embed></object>'),n.dialog("open"),!1}),$("div").hasClass("homeLogin")&&$("div .window").width("684px"),$(".faqBody").hide(),$("div.faqList li a.faqQuestion").click(function(e){return $(e.target).is(".faqQuestion")&&$(e.target).next(".faqBody").slideToggle(250).css("opacity","none"),$(this).toggleClass("faqDown"),!1}),$("div.faqList a.faqExpand").each(function(e,t){$(t).click(function(){return $(t).parent().children().find(".faqBody").hide(),$(t).parent().children().find(".faqBody").slideToggle(250).css("opacity","none"),$(t).parent().children().find(".faqQuestion").addClass("faqDown"),!1})}),$("div.faqList a.faqCollapse").each(function(e,t){$(t).click(function(){return $(t).parent().children().find(".faqBody").hide(),$(t).parent().children().find(".faqQuestion").removeClass("faqDown"),!1})}),$("body").attr("onunload","");var l={sensitivity:7,interval:100,over:e,timeout:300,out:t};$("ul#topnav > li").hoverIntent(l),initFontSize("mainWrapper");var d;$(".fontSizeButtons a.fontSizeDown").click(function(){return d=$.cookie("fontSize"),"150%"==d&&setFontSize2("mainWrapper","120%"),"120%"!=d?!1:void setFontSize1("mainWrapper","100%")}),$(".fontSizeButtons a.fontSizeUp").click(function(){return d=$.cookie("fontSize"),"100%"==d&&setFontSize2("mainWrapper","120%"),"120%"!=d?!1:void setFontSize3("mainWrapper","150%")}),$(".css-tabs a").click(function(){var e=this.href,t=$(this).text();"www.progress-energy.com"==window.location.hostname&&_gaq.push(["_trackEvent","Tabs","Click",t+" - "+e])}),$(".ytvideoModals").click(function(){var e=this.href;"www.progress-energy.com"==window.location.hostname&&_gaq.push(["_trackEvent","Video","Play",e])}),$(".faqQuestion").click(function(){var e=$(location).attr("href"),t=$(this).text();"www.progress-energy.com"==window.location.hostname&&_gaq.push(["_trackEvent","FAQ","Click",e+" - "+t])})});var hash=location.hash.substring(1),loc;loc=isValidLocation(hash)?hash:getCookie("Location"),loc&&setCookie("Location",loc,365);var DEServer;switch(location.hostname){case"wwwint.progress-energy.com":DEServer="wwwtest2.duke-energy.com";break;case"ewi-uat.progress-energy.com":DEServer="ewiqa.duke-energy.com";break;case"ewi.progress-energy.com":DEServer="ewi.duke-energy.com";break;case"wwwqa.progress-energy.com":DEServer="wwwqa.duke-energy.com";break;default:DEServer="www.duke-energy.com"}$(function(){var e=getCookie("Location")?getCookie("Location"):"Choose State";$(".stateSelectContainer").html('<div id="change-state"><a class="change-state-button" href="/choose-state/?targ=/">'+e+'<i></i></a><a href="/choose-state/?targ=/"><span>Change Location</span></a></div>'),$("body").append('<div id="choose-state-overlay" class="overlay hide"><div class="overlay-inner"><iframe id="choose-state-iframe" src="" frameborder="0" width="100%" height="425"></iframe></div></div>'),$('a[href*="choose-state/"]').live("click",function(t){t.preventDefault();var a=$(this),o=a.attr("href"),i=getParameterByName("targ",o)?getParameterByName("targ",o):o.replace("?","%3F"),n=$("#choose-state-iframe"),r=location.protocol+"//"+location.hostname,s=a.text().replace("&","and"),s="Carolinas"==e||"Florida"==e?"Change State":s,c=location.protocol+"//"+DEServer+"/accounts/choose-state/",l=c+"?target="+i+"&referrer="+r+"&title="+s;n.attr("src",l)}).overlay({target:"#choose-state-overlay",fixed:!1,mask:{color:"#000",loadSpeed:200,opacity:.75},onBeforeLoad:function(){},onClose:function(){$("#choose-state-iframe").attr("src","")}}),$("#topnav").find("a").removeClass("activeTab");var t=window.location.href;t.indexOf("/home/")>-1?$("#topnav").children("li:eq(0)").children("a").addClass("activeTab"):t.indexOf("/business/")>-1?$("#topnav").children("li:eq(1)").children("a").addClass("activeTab"):t.indexOf("/company/")>-1?$("#topnav").children("li:eq(2)").children("a").addClass("activeTab"):t.indexOf("/support/")>-1&&$("#topnav").children("li:eq(3)").children("a").addClass("activeTab"),t.indexOf("/carolinas/")>-1&&$(".homeLink").addClass(" prog")}),$(function(){var e=$(".lightbox-trigger, .lightbox-trigger-video");e.click(function(e){e.preventDefault();var t=$(this),a=t.attr("class"),o=a.indexOf("-video")>-1?!0:!1,i={width:o?682:750,height:o?368:500},n=t.attr("href");n+=t.attr("href").indexOf("?")>-1?"&":"?",n+="parent="+location.href,window.location.href.indexOf("/heip/")>-1?i={width:850,height:710}:window.location.href.indexOf("smart-appliance")>-1&&(i={width:850,height:930,overflow:!0},n=t.attr("href"));var r='<div id="iframe-overlay" class="overlay hide"><a class="close"></a><div class="overlay-inner">'+('<iframe src="'+n+'" frameborder="0" width="100%"></iframe>')+"</div><div/>";$("body").append(r),$("#iframe-overlay").css({width:i.width}),$("#iframe-overlay").find("iframe").css({height:i.height}),$("#iframe-overlay").overlay({load:!0,mask:{color:"#000",loadSpeed:200,opacity:.75},closeOnClick:!1,onClose:function(){$("#iframe-overlay").remove(),_gaq.push(["_trackEvent","lightbox","close",t.text()])}}),i.overflow&&$("#iframe-overlay").css({position:"absolute"}),_gaq.push(["_trackEvent","lightbox","open",t.text()]),e.preventDefault()})}),function(e,t){function a(t,a){this.element=e(t),this.options=e.extend({},i,a),this._defaults=i,this._name=o,this.init()}var o="trackEvent",i={accounts:!1,href:null,category:"External Link",action:"Click",value:null};a.prototype={init:function(){var e=this;this.trackEvent(this.element,this.options,function(t,a){e.routesLink(t,a)})},trackEvent:function(t,a,o){a.accounts instanceof Array?e.each(a.accounts,function(e,t){t[0].indexOf("_setAccount")>-1&&_gaq.push(["_setAccount",t[1]],["_trackEvent",a.category,a.action,a.value])}):_gaq.push(["_trackEvent",a.category,a.action,a.value]),o(t,a)},routesLink:function(e,a){if(null!=a.href){var o=e.attr("target");"_blank"==o?t.open(a.href):setTimeout(t.location.href=a.href,200)}}},e.fn[o]=function(t){return this.each(function(){e.data(this,"plugin_"+o,new a(this,t))})}}(jQuery,window,document),$(function(){$('a[href^="http"]:not([href*="progress-energy.com"])').click(function(e){var t=$(this);t.hasClass("lightbox-trigger")||t.hasClass("lightbox-trigger-video")||t.trackEvent({href:$(this).attr("href"),category:"External Link",action:"Click",value:$(this).attr("href"),accounts:gaq}),e.preventDefault()}),$(".collapsible").each(function(){var e=$(this),t=e.find("h4.closed").length||e.find("h4.q").length?!0:!1,a=!t&&e.find(".collapsible-trigger").length?!0:!1;return t?(e.parent().accordion({onLoad:function(){$("#showHideAll").parent().addClass("collapsible-all collapsible-old").text("Show All")},paneClass:".expand",triggerClass:"h4",addShowAll:!1}),!1):void(a&&e.accordion())})});